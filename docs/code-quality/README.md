# ä»£ç è´¨é‡å·¥å…·å’ŒæŒ‡å—

æœ¬ç›®å½•åŒ…å«ä»£ç è´¨é‡ç›¸å…³çš„å·¥å…·ã€é…ç½®å’Œæ–‡æ¡£ã€‚

## ğŸ“š æ–‡æ¡£ç´¢å¼•

### æœªä½¿ç”¨ä»£ç æ£€æµ‹

- **[æœªä½¿ç”¨ä»£ç æ£€æµ‹æŒ‡å—](./UNUSED_CODE_DETECTION.md)** - å®Œæ•´çš„ä½¿ç”¨æŒ‡å—
- **å·¥å…·é…ç½®**:
  - Go: `/.golangci.yml`
  - Python: `/pyproject.toml`
- **CI é…ç½®**: `/.github/workflows/unused-code-check.yml`
- **æœ¬åœ°è„šæœ¬**:
  - `/scripts/check-unused-code.sh` - å¿«é€Ÿæ£€æµ‹è„šæœ¬
  - `/scripts/analyze-unused-code.py` - è¯¦ç»†åˆ†æè„šæœ¬

### ä»£ç å®¡æŸ¥æŠ¥å‘Š

- **[æœªä½¿ç”¨å‡½æ•°å®Œæ•´æŠ¥å‘Š](../../CODE_REVIEW_UNUSED_FUNCTIONS.md)** - å½“å‰é¡¹ç›®çš„å®Œæ•´åˆ†ææŠ¥å‘Š

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### æ£€æµ‹æœªä½¿ç”¨ä»£ç 

```bash
# å¿«é€Ÿæ£€æµ‹
./scripts/check-unused-code.sh

# è¯¦ç»†åˆ†æ
python3 scripts/analyze-unused-code.py
```

### æŸ¥çœ‹å†å²æŠ¥å‘Š

```bash
# æŸ¥çœ‹æœ€è¿‘çš„æŠ¥å‘Š
ls -lt .reports/unused-summary-*.md | head -5

# æŸ¥çœ‹å®Œæ•´ä»£ç å®¡æŸ¥æŠ¥å‘Š
cat CODE_REVIEW_UNUSED_FUNCTIONS.md
```

## ğŸ“Š è´¨é‡æŒ‡æ ‡

é¡¹ç›®å½“å‰çŠ¶æ€ï¼ˆ2025-10-27ï¼‰:

- **Go æœªä½¿ç”¨å‡½æ•°**: 309 ä¸ª
  - æœªä½¿ç”¨æ„é€ å‡½æ•°: 74 ä¸ª
  - å®Œå…¨æœªä½¿ç”¨å‡½æ•°: 235 ä¸ª
- **Python æœªä½¿ç”¨å‡½æ•°**: 16 ä¸ª
- **æ€»è®¡**: 325 ä¸ª

ç›®æ ‡:

- Q1 2025: å‡å°‘åˆ° < 200 ä¸ª
- Q2 2025: å‡å°‘åˆ° < 100 ä¸ª
- Q3 2025: å‡å°‘åˆ° < 50 ä¸ª

## ğŸ”„ å·¥ä½œæµç¨‹

### 1. å®šæœŸæ£€æµ‹ï¼ˆæ¯å‘¨ï¼‰

```bash
# è¿è¡Œæ£€æµ‹
./scripts/check-unused-code.sh

# æŸ¥çœ‹æŠ¥å‘Š
cat .reports/unused-summary-$(date +%Y%m%d)*.md
```

### 2. PR æ£€æŸ¥

æ¯æ¬¡æäº¤ PR æ—¶ï¼ŒCI ä¼šè‡ªåŠ¨ï¼š

1. è¿è¡Œæœªä½¿ç”¨ä»£ç æ£€æµ‹
2. åœ¨ PR ä¸­è¯„è®ºæ£€æµ‹ç»“æœ
3. ç”Ÿæˆè¯¦ç»†æŠ¥å‘Šï¼ˆArtifactsï¼‰

### 3. æ¸…ç†æµç¨‹

1. **è¯†åˆ«**: è¿è¡Œæ£€æµ‹å·¥å…·
2. **åˆ†ç±»**: åŒºåˆ†çœŸæ­£çš„æ­»ä»£ç å’Œè¯¯æŠ¥
3. **ç¡®è®¤**: ä¸å›¢é˜Ÿæ²Ÿé€šç¡®è®¤
4. **æ¸…ç†**: åˆ é™¤ç¡®è®¤çš„æ­»ä»£ç 
5. **æµ‹è¯•**: è¿è¡Œæµ‹è¯•ç¡®ä¿åŠŸèƒ½æ­£å¸¸
6. **æäº¤**: åˆ›å»º PR

## ğŸ¯ æ¸…ç†ä¼˜å…ˆçº§

### P0 - ç«‹å³æ¸…ç†ï¼ˆé¢„è®¡ ~100 ä¸ªï¼‰

- âœ… æ˜ç¡®ä¸éœ€è¦çš„ç¬¬ä¸‰æ–¹é›†æˆ
- âœ… ç¡®è®¤ä¸ä½¿ç”¨çš„å®Œæ•´åŠŸèƒ½æ¨¡å—
- âœ… Python æœªä½¿ç”¨çš„å·¥å…·å‡½æ•°

### P1 - çŸ­æœŸæ¸…ç†ï¼ˆé¢„è®¡ ~80 ä¸ªï¼‰

- ğŸ”„ ä¸Šä¸‹æ–‡å‹ç¼©ç›¸å…³ï¼ˆå¦‚ä¸ä½¿ç”¨ï¼‰
- ğŸ”„ ç—…æ¯’æ‰«æé›†æˆ
- ğŸ”„ æœåŠ¡æ³¨å†Œä¸å‘ç°ï¼ˆå¦‚ä½¿ç”¨ K8sï¼‰

### P2 - é•¿æœŸæ¸…ç†ï¼ˆé¢„è®¡ ~60 ä¸ªï¼‰

- ğŸ“‹ é«˜çº§ç¼“å­˜æ“ä½œ
- ğŸ“‹ æ‰¹å¤„ç†æ“ä½œ
- ğŸ“‹ Domain æ¨¡å‹çš„é«˜çº§æ–¹æ³•

## ğŸ” å¸¸è§é—®é¢˜

### Q: Wire ä¾èµ–æ³¨å…¥çš„æ„é€ å‡½æ•°è¢«æ ‡è®°ä¸ºæœªä½¿ç”¨ï¼Ÿ

A: è¿™äº›å‡½æ•°åœ¨ `wire.go` ä¸­è¢«ä½¿ç”¨ï¼Œä¸åº”åˆ é™¤ã€‚é…ç½®æ–‡ä»¶å·²æ’é™¤ `wire.go`ã€‚

### Q: å¦‚ä½•æ ‡è®°é¢„ç•™åŠŸèƒ½ï¼Ÿ

A: ä½¿ç”¨ä»¥ä¸‹æ³¨é‡Šæ ¼å¼ï¼š

```go
// RESERVED: ä¸º OAuth é›†æˆé¢„ç•™
// Roadmap: Q2 2024
// Issue: #123
func LoginWithOAuth() error {
    panic("not implemented")
}
```

### Q: æ£€æµ‹æŠ¥å‘Šå¤ªé•¿ï¼Œå¦‚ä½•ç­›é€‰ï¼Ÿ

A: ä½¿ç”¨ grep è¿‡æ»¤ï¼š

```bash
# åªçœ‹ conversation-service
./scripts/check-unused-code.sh 2>&1 | grep conversation-service

# åªçœ‹å¯¼å‡ºå‡½æ•°
./scripts/check-unused-code.sh 2>&1 | grep "^func [A-Z]"
```

## ğŸ“ˆ æŒç»­æ”¹è¿›

### è‡ªåŠ¨åŒ–

- [x] CI/CD é›†æˆ
- [x] æ¯å‘¨è‡ªåŠ¨æ‰«æ
- [x] PR è‡ªåŠ¨è¯„è®º
- [ ] è‡ªåŠ¨åˆ›å»ºæ¸…ç† Issue
- [ ] è¶‹åŠ¿åˆ†æå’Œå¯è§†åŒ–

### å·¥å…·å¢å¼º

- [x] golangci-lint é…ç½®
- [x] Ruff + Vulture é›†æˆ
- [ ] è‡ªå®šä¹‰æ£€æµ‹è§„åˆ™
- [ ] æ›´æ™ºèƒ½çš„è¯¯æŠ¥è¿‡æ»¤

### æµç¨‹ä¼˜åŒ–

- [x] è¯¦ç»†æ–‡æ¡£
- [x] å¿«é€Ÿæ£€æµ‹è„šæœ¬
- [ ] æ¸…ç†ä»»åŠ¡çœ‹æ¿
- [ ] å®šæœŸå›é¡¾ä¼šè®®

## ğŸ”— ç›¸å…³èµ„æº

### å†…éƒ¨èµ„æº

- [è¿ç»´æ‰‹å†Œ](../runbook/index.md)
- [æ¶æ„æ–‡æ¡£](../arch/overview.md)
- [SLO æŒ‡æ ‡](../nfr/slo.md)

### å¤–éƒ¨å·¥å…·

- [golangci-lint](https://golangci-lint.run/)
- [Ruff](https://docs.astral.sh/ruff/)
- [Vulture](https://github.com/jendrikseipp/vulture)

## ğŸ“ è´¡çŒ®æŒ‡å—

### æ·»åŠ æ–°çš„æ£€æµ‹è§„åˆ™

1. ç¼–è¾‘ `.golangci.yml` æˆ– `pyproject.toml`
2. æµ‹è¯•æ–°è§„åˆ™
3. æ›´æ–°æ–‡æ¡£
4. æäº¤ PR

### æ”¹è¿›æ£€æµ‹è„šæœ¬

1. ä¿®æ”¹ `scripts/check-unused-code.sh` æˆ– `scripts/analyze-unused-code.py`
2. æ·»åŠ æµ‹è¯•ç”¨ä¾‹
3. æ›´æ–°æ–‡æ¡£
4. æäº¤ PR

## ğŸ†˜ è·å–å¸®åŠ©

- **æŠ€æœ¯æ”¯æŒ**: æŸ¥çœ‹ [æœªä½¿ç”¨ä»£ç æ£€æµ‹æŒ‡å—](./UNUSED_CODE_DETECTION.md)
- **GitHub Issues**: [åˆ›å»º Issue](https://github.com/your-org/your-repo/issues/new)
- **å›¢é˜Ÿè”ç³»**: tech-lead@voiceassistant.com

---

**æœ€åæ›´æ–°**: 2025-10-27
**ç»´æŠ¤è€…**: AI å®¢æœå¹³å°å›¢é˜Ÿ
