# Nacos 配置中心连接配置（可选）
nacos:
  server_addr: "localhost"
  server_port: 8848
  namespace: ""
  group: "VoiceHelper"
  data_id: "knowledge-service.yaml"
  username: ""
  password: ""
  log_dir: "/tmp/nacos/log"
  cache_dir: "/tmp/nacos/cache"
  log_level: "info"
  timeout_ms: 5000

server:
  http:
    addr: 0.0.0.0:8000
    timeout: 30s
  grpc:
    addr: 0.0.0.0:9000
    timeout: 30s

data:
  database:
    driver: postgres
    source: postgresql://voicehelper:password@postgres:5432/voicehelper?sslmode=disable&search_path=knowledge
  redis:
    addr: redis:6379
    db: 2
  minio:
    endpoint: minio:9000
    access_key: minioadmin
    secret_key: minioadmin
    bucket: voicehelper-documents
    use_ssl: false

# 存储配置
storage:
  type: minio # local or minio
  base_path: ./data/documents # 本地存储路径（降级使用）
  minio:
    endpoint: minio:9000
    access_key: minioadmin
    secret_key: minioadmin123
    bucket: documents
    use_ssl: false

# 病毒扫描配置
virus_scan:
  enabled: true
  type: clamav # clamav or mock
  clamav_host: clamav.voiceassistant-prod.svc.cluster.local
  clamav_port: 3310
  max_file_size: 104857600 # 100MB
  scan_timeout: 30s

# 文档处理配置
document_processor:
  max_chunk_size: 1000 # 每个chunk最多1000个字符
  chunk_overlap: 200 # chunk之间重叠200个字符
  min_chunk_size: 100 # 最小chunk大小

kafka:
  brokers:
    - kafka:9092
  topics:
    document_events: document.events

service:
  name: knowledge-service
  version: v2.0.0

observability:
  tracing:
    enabled: true
    endpoint: otel-collector:4317
  metrics:
    enabled: true
  logging:
    level: info
    format: json
